<!-- Add this CSS to fix the form layout -->
<style>
   /* Fix the form content area height calculation */
   #form-content-area {
      flex-grow: 1;
      overflow-y: auto;
      padding: 0 2rem;
      max-height: calc(100vh - 300px);
      /* Adjust based on your header height */
   }

   /* Ensure next button stays visible */
   .form-stage {
      padding-bottom: 80px;
      /* Give space for next button */
   }

   /* Fix button positioning */
   .next-btn-container {
      position: sticky;
      bottom: 0;
      background: white;
      padding: 1rem 2rem;
      border-top: 1px solid #e5e7eb;
      margin-top: auto;
   }
</style>

<!-- Add this JavaScript before closing </body> tag -->
<script>
   // Demo functionality
   document.getElementById('show-demo-btn').addEventListener('click', function() {
      document.getElementById('sales-content').classList.add('hidden');
      document.getElementById('demo-chat-container').classList.remove('hidden');

      // Start demo chat
      startDemoChat();
   });

   function startDemoChat() {
      const messages = document.getElementById('messages');
      messages.innerHTML = '';

      setTimeout(() => {
         addBotMessage("Hi! I'm here to help you with your legal questions. What type of legal issue are you dealing with?", [
            "Personal Injury",
            "Family Law",
            "Criminal Defense",
            "Other"
         ]);
      }, 1000);
   }

   function addBotMessage(text, options = null) {
      const messages = document.getElementById('messages');
      const messageDiv = document.createElement('div');
      messageDiv.className = 'message bot-message';

      let optionsHtml = '';
      if (options) {
         optionsHtml = '<div class="options">' +
            options.map(opt => `<button class="option-btn" onclick="selectOption('${opt}')">${opt}</button>`).join('') +
            '</div>';
      }

      messageDiv.innerHTML = `
      <div class="bot-avatar">AI</div>
      <div class="bot-text">${text}${optionsHtml}</div>
   `;

      messages.appendChild(messageDiv);
      messages.scrollTop = messages.scrollHeight;
   }

   function selectOption(option) {
      // Add user message
      const messages = document.getElementById('messages');
      const userDiv = document.createElement('div');
      userDiv.className = 'message user-message';
      userDiv.innerHTML = `<div class="user-text">${option}</div>`;
      messages.appendChild(userDiv);

      // Disable all option buttons
      document.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);

      // Add bot response based on selection
      setTimeout(() => {
         if (option === "Personal Injury") {
            addBotMessage("I can help with personal injury cases. When did your injury occur?", [
               "Within the last month",
               "1-6 months ago",
               "Over 6 months ago"
            ]);
         } else {
            addBotMessage("Thanks for that information. I'd like to connect you with one of our attorneys. Please provide your contact details.", null);
         }
      }, 1000);

      messages.scrollTop = messages.scrollHeight;
   }
</script>